(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(47)},,,,,,,,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),r=n(16),c=n.n(r),l=(n(25),n(9)),i=n(0),u=n(3);n(27);function s(e){var t=Object(i.m)(),n=o.a.useState(e.defaultTodoText||""),a=Object(u.a)(n,2),r=a[0],c=a[1];return o.a.createElement("form",{onSubmit:function(n){n.preventDefault(),e.submitEvent(r),t("/")}},o.a.createElement("label",null,e.label),o.a.createElement("textarea",{value:r,onChange:function(e){c(e.target.value)},placeholder:"Introduce un nuevo ToDo"}),o.a.createElement("div",{className:"TodoForm-buttonContainer"},o.a.createElement("button",{type:"button",className:"TodoForm-button TodoForm-button--cancel",onClick:function(){t("/")}},"Cancelar"),o.a.createElement("button",{type:"submit",className:"TodoForm-button TodoForm-button--add"},e.submitText)))}var d=n(5),m=n(4),f=n(13);function p(e,t){var n=o.a.useReducer(g,E({initialValue:t})),a=Object(u.a)(n,2),r=a[0],c=a[1],l=r.sincronizedItem,i=r.error,s=r.loading,d=r.item,m=function(e){return c({type:v.error,payload:e})};o.a.useEffect(function(){setTimeout(function(){try{var n,a=localStorage.getItem(e);a?n=JSON.parse(a):(localStorage.setItem(e,JSON.stringify(t)),n=t),o=n,c({type:v.success,payload:o})}catch(i){m(i)}var o},2e3)},[l]);return{item:d,saveItem:function(t){try{var n=JSON.stringify(t);localStorage.setItem(e,n),a=t,c({type:v.save,payload:a})}catch(i){m(i)}var a},loading:s,error:i,sincronizeItem:function(){c({type:v.sincronize})}}}var E=function(e){return{sincronizedItem:!0,error:!1,loading:!0,item:e.initialValue}},v={error:"ERROR",success:"SUCCESS",save:"SAVE",sincronize:"SINCRONIZE"},g=function(e,t){return function(e,t){var n;return n={},Object(m.a)(n,v.error,Object(f.a)({},e,{error:!0})),Object(m.a)(n,v.success,Object(f.a)({},e,{error:!1,loading:!1,sincronizedItem:!0,item:t})),Object(m.a)(n,v.save,Object(f.a)({},e,{item:t})),Object(m.a)(n,v.sincronize,Object(f.a)({},e,{sincronizedItem:!1,loading:!0})),n}(e,t.payload)[t.type]||e};function h(){var e=p("TODOS_V2",[]),t=e.item,n=e.saveItem,a=e.sincronizeItem,r=e.loading,c=e.error,l=o.a.useState(""),i=Object(u.a)(l,2),s=i[0],m=i[1],f=t.filter(function(e){return!!e.completed}).length,E=t.length,v=[];v=!s.length>=1?t:t.filter(function(e){var t=e.text.toLowerCase(),n=s.toLowerCase();return t.includes(n)});return{state:{loading:r,error:c,totalTodos:E,completedTodos:f,searchValue:s,searchedTodos:v,getTodo:function(e){var n=t.findIndex(function(t){return t.id===e});return t[n]}},stateUpdaters:{setSearchValue:m,addTodo:function(e){var a=function(e){if(!e.length)return 1;var t=e.map(function(e){return e.id});return Math.max.apply(Math,Object(d.a)(t))+1}(t),o=Object(d.a)(t);o.push({completed:!1,text:e,id:a}),n(o)},completeTodo:function(e){var a=t.findIndex(function(t){return t.id===e}),o=Object(d.a)(t);o[a].completed=!0,n(o)},editTodo:function(e,a){var o=t.findIndex(function(t){return t.id===e}),r=Object(d.a)(t);r[o].text=a,n(r)},deleteTodo:function(e){var a=t.findIndex(function(t){return t.id===e}),o=Object(d.a)(t);o.splice(a,1),n(o)},sincronizeTodos:a}}}function T(){var e,t=Object(i.j)(),n=Object(i.o)(),a=Number(n.id),r=h(),c=r.state,l=r.stateUpdaters,u=c.loading,d=c.getTodo,m=l.editTodo;if(t.state&&t.state.todo)e=t.state.todo.text;else{if(u)return o.a.createElement("p",null,"Cargando...");e=d(a).text}return o.a.createElement(s,{label:"Edita tu ToDo",defaultTodoText:e,submitText:"Editar",submitEvent:function(e){return m(a,e)}})}function b(e){var t=e.children,n=e.loading;return o.a.createElement("header",null,o.a.Children.toArray(t).map(function(e){return o.a.cloneElement(e,{loading:n})}))}n(29);function O(e){var t=e.totalTodos,n=e.completedTodos,a=e.loading;return o.a.createElement("h2",{className:"TodoCounter ".concat(!!a&&"TodoCounter--loading")},"Has completado ",n," de ",t," ToDos")}n(31);function y(e){var t=e.searchValue,n=e.setSearchValue,a=e.loading;return o.a.createElement("input",{className:"TodoSearch",placeholder:"Cebolla",value:t,onChange:function(e){console.log(e.target.value),n(e.target.value)},disabled:a})}n(33);function C(e){var t=e.children||e.render;return o.a.createElement("section",{className:"TodoList-container"},e.error&&e.onError(),e.loading&&e.onLoading(),!e.loading&&!e.totalTodos&&e.onEmptyTodos(),!!e.totalTodos&&!e.searchedTodos.length&&e.onEmptySearchResults(e.searchText),!e.loading&&!e.error&&e.searchedTodos.map(t))}var x;n(35);function I(){return(I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var j,w,N=function(e){return o.a.createElement("svg",I({xmlnsXlink:"http://www.w3.org/1999/xlink",version:1.1,id:"Capa_1",x:"0px",y:"0px",viewBox:"0 0 507.506 507.506",style:{enableBackground:"new 0 0 507.506 507.506"},xmlSpace:"preserve",width:512,height:512},e),x||(x=o.a.createElement("g",null,o.a.createElement("path",{d:"M163.865,436.934c-14.406,0.006-28.222-5.72-38.4-15.915L9.369,304.966c-12.492-12.496-12.492-32.752,0-45.248l0,0   c12.496-12.492,32.752-12.492,45.248,0l109.248,109.248L452.889,79.942c12.496-12.492,32.752-12.492,45.248,0l0,0   c12.492,12.496,12.492,32.752,0,45.248L202.265,421.019C192.087,431.214,178.271,436.94,163.865,436.934z"}))))};n.p;function S(){return(S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var k,L,V,D=function(e){return o.a.createElement("svg",S({viewBox:"0 0 24 24",fill:"none"},e),j||(j=o.a.createElement("path",{d:"M0 18.9993V24H5.00069L19.756 9.24459L14.7553 4.2439L0 18.9993Z"})),w||(w=o.a.createElement("path",{d:"M23.6099 3.5038L20.4961 0.390054C19.9761 -0.130018 19.1293 -0.130018 18.6092 0.390054L16.1689 2.83039L21.1695 7.83108L23.60995.39074C24.13 4.87067 24.13 4.02387 23.6099 3.5038Z"})))};n.p;function z(){return(z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var A=function(e){return o.a.createElement("svg",z({id:"Outline",viewBox:"0 0 24 24",width:512,height:512},e),k||(k=o.a.createElement("path",{d:"M21,4H17.9A5.009,5.009,0,0,0,13,0H11A5.009,5.009,0,0,0,6.1,4H3A1,1,0,0,0,3,6H4V19a5.006,5.006,0,0,0,5,5h6a5.006,5.006,0,0,0,5-5V6h1a1,1,0,0,0,0-2ZM11,2h2a3.006,3.006,0,0,1,2.829,2H8.171A3.006,3.006,0,0,1,11,2Zm7,17a3,3,0,0,1-3,3H9a3,3,0,0,1-3-3V6H18Z"})),L||(L=o.a.createElement("path",{d:"M10,18a1,1,0,0,0,1-1V11a1,1,0,0,0-2,0v6A1,1,0,0,0,10,18Z"})),V||(V=o.a.createElement("path",{d:"M14,18a1,1,0,0,0,1-1V11a1,1,0,0,0-2,0v6A1,1,0,0,0,14,18Z"})))},H=(n.p,{check:function(e){return o.a.createElement(N,{className:"Icon-svg Icon-svg--check",fill:e})},edit:function(e){return o.a.createElement(D,{className:"Icon-svg Icon-svg--edit",fill:e})},delete:function(e){return o.a.createElement(A,{className:"Icon-svg Icon-svg--delete",fill:e})}});function M(e){var t=e.type,n=e.color,a=void 0===n?"gray":n,r=e.onClick;return o.a.createElement("span",{className:"Icon-container Icon-container--".concat(t),onClick:r},H[t](a))}function F(e){var t=e.completed,n=e.onComplete;return o.a.createElement(M,{type:"check",color:t?"#4caf50":"gray",onClick:n})}function R(e){var t=e.onEdit;return o.a.createElement(M,{type:"edit",onClick:t})}function Z(e){var t=e.onDelete;return o.a.createElement(M,{type:"delete",onClick:t})}n(37);function B(e){return o.a.createElement("li",{className:"TodoItem"},o.a.createElement(F,{completed:e.completed,onComplete:e.onComplete}),o.a.createElement("p",{className:"TodoItem-p ".concat(e.completed&&"TodoItem-p--complete")},e.text),o.a.createElement(R,{onEdit:e.onEdit}),o.a.createElement(Z,{onDelete:e.onDelete}))}n(39);function J(e){return o.a.createElement("button",{className:"CreateTodoButton",onClick:e.onClick},"+")}n(14),n(41);function U(e){var t=e.error;return o.a.createElement("p",null,t)}n(43);function P(){return o.a.createElement("div",{className:"LoadingTodo-container"},o.a.createElement("span",{className:"LoadingTodo-completeIcon"}),o.a.createElement("p",{className:"LoadingTodo-text"},"Cargando ToDos..."),o.a.createElement("span",{className:"LoadingTodo-deleteIcon"}))}function _(){return o.a.createElement("p",null,"\xa1Crea tu primer ToDo!")}n(45);function q(e){var t=function(e){var t=o.a.useState(!1),n=Object(u.a)(t,2),a=n[0],r=n[1];return window.addEventListener("storage",function(e){"TODOS_V1"===e.key&&(console.log("Hubo cambios en TODOS_V1"),r(!0))}),{show:a,toggleShow:function(){e(),r(!1)}}}(e.sincronize),n=t.show,a=t.toggleShow;return n?o.a.createElement("div",{className:"ChangeAlert-bg"},o.a.createElement("div",{className:"ChangeAlert-container"},o.a.createElement("p",null,"Parece que cambiaste tus TODOs en otra pesta\xf1a o ventana del navegador."),o.a.createElement("p",null,"\xbfQuieres sincronizar tus TODOs?"),o.a.createElement("button",{className:"TodoForm-button TodoForm-button--add",onClick:a},"Yes!"))):null}function Q(){var e=Object(i.m)(),t=h(),n=t.state,a=t.stateUpdaters,r=n.loading,c=n.error,l=n.totalTodos,u=n.completedTodos,s=n.searchValue,d=n.searchedTodos,m=a.setSearchValue,f=a.completeTodo,p=a.deleteTodo,E=a.sincronizeTodos;return o.a.createElement(o.a.Fragment,null,o.a.createElement(b,{loading:r},o.a.createElement(O,{totalTodos:l,completedTodos:u}),o.a.createElement(y,{searchValue:s,setSearchValue:m})),o.a.createElement(C,{error:c,loading:r,searchedTodos:d,searchText:s,totalTodos:l,onError:function(){return o.a.createElement(U,null)},onLoading:function(){return o.a.createElement(P,null)},onEmptyTodos:function(){return o.a.createElement(_,null)},onEmptySearchResults:function(e){return o.a.createElement("p",null,"No hay resultados para ",e)}},function(t){return o.a.createElement(B,{key:t.id,text:t.text,completed:t.completed,onEdit:function(){return e("/edit/"+t.id,{state:{todo:t}})},onComplete:function(){return f(t.id)},onDelete:function(){return p(t.id)}})}),o.a.createElement(J,{onClick:function(){return e("/new")}}),o.a.createElement(q,{sincronize:E}))}function X(){var e=h().stateUpdaters.addTodo;return o.a.createElement(s,{label:"Escribe tu nuevo ToDo",submitText:"A\xf1adir",submitEvent:function(t){return e(t)}})}function Y(){return o.a.createElement(l.a,null,o.a.createElement(i.c,null,o.a.createElement(i.a,{path:"/",element:o.a.createElement(Q,null)}),o.a.createElement(i.a,{path:"/new",element:o.a.createElement(X,null)}),o.a.createElement(i.a,{path:"/edit/:id",element:o.a.createElement(T,null)}),o.a.createElement(i.a,{path:"*",element:o.a.createElement("p",null,"Not found")})))}c.a.createRoot(document.getElementById("root")).render(o.a.createElement(Y,null))}],[[17,2,1]]]);
//# sourceMappingURL=main.1ac817ee.chunk.js.map